---
phase: 14-pre-checkin-dashboard
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/pre-checkin/pre-checkin-analytics.tsx
autonomous: true

must_haves:
  truths:
    - "Analytics cards display completion rate, pending count, and overdue count"
    - "Cards use correct color coding (green/yellow/red based on values)"
    - "Loading state shows skeleton animation"
    - "Cards are responsive (3 cols on lg, 2 on sm, 1 on mobile)"
  artifacts:
    - path: "src/components/pre-checkin/pre-checkin-analytics.tsx"
      provides: "KPI cards component for pre-checkin dashboard"
      exports: ["PreCheckinAnalytics", "PreCheckinAnalyticsProps"]
  key_links:
    - from: "src/components/pre-checkin/pre-checkin-analytics.tsx"
      to: "shadcn/ui Card"
      via: "import from @/components/ui/card"
      pattern: "import.*Card.*from.*@/components/ui/card"
---

<objective>
Create analytics cards component that displays pre-checkin KPIs at the top of the dashboard.

Purpose: Provide at-a-glance visibility into pre-checkin completion metrics, enabling staff to quickly identify workload and urgent items.
Output: Reusable analytics cards component with loading state and color-coded metrics.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-pre-checkin-dashboard/14-CONTEXT.md
@.planning/phases/14-pre-checkin-dashboard/14-RESEARCH.md

Reference patterns:
@src/components/analytics/kpi-cards.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PreCheckinAnalytics component</name>
  <files>src/components/pre-checkin/pre-checkin-analytics.tsx</files>
  <action>
Create the analytics cards component following the KPI cards pattern:

1. **'use client' directive** at top

2. **Imports:**
   - Card, CardContent, CardHeader, CardTitle from @/components/ui/card
   - Skeleton from @/components/ui/skeleton
   - Icons from lucide-react: CheckCircle, Clock, AlertTriangle
   - cn from @/lib/utils

3. **Props interface:**
```typescript
export interface PreCheckinAnalyticsProps {
  completionRate: number      // 0-100
  pendingCount: number
  overdueCount: number
  loading?: boolean
}
```

4. **Helper functions:**
   - getCompletionRateColor(rate): green if >= 70, yellow if >= 50, red otherwise
   - getOverdueColor(count): green if 0, yellow if <= 3, red otherwise

5. **Skeleton component:**
```tsx
function PreCheckinAnalyticsSkeleton() {
  return (
    <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
      {[1, 2, 3].map((i) => (
        <Card key={i}>
          <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
            <Skeleton className="h-4 w-24" />
            <Skeleton className="h-5 w-5 rounded" />
          </CardHeader>
          <CardContent>
            <Skeleton className="h-8 w-16 mb-2" />
            <Skeleton className="h-3 w-32" />
          </CardContent>
        </Card>
      ))}
    </div>
  )
}
```

6. **Main component:**
```tsx
export function PreCheckinAnalytics({
  completionRate,
  pendingCount,
  overdueCount,
  loading = false
}: PreCheckinAnalyticsProps) {
  if (loading) return <PreCheckinAnalyticsSkeleton />

  return (
    <div className="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
      {/* Card 1: Taxa de Conclusao */}
      <Card className="hover:shadow-md transition-shadow">
        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
          <CardTitle className="text-sm font-medium text-gray-600">
            Taxa de Conclusao
          </CardTitle>
          <CheckCircle className={cn('h-5 w-5', getCompletionRateColor(completionRate))} />
        </CardHeader>
        <CardContent>
          <div className={cn('text-2xl font-bold', getCompletionRateColor(completionRate))}>
            {completionRate}%
          </div>
          <p className="text-xs text-gray-500 mt-1">
            pre-checkins completos
          </p>
        </CardContent>
      </Card>

      {/* Card 2: Pendentes */}
      <Card className="hover:shadow-md transition-shadow">
        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
          <CardTitle className="text-sm font-medium text-gray-600">
            Pendentes
          </CardTitle>
          <Clock className="h-5 w-5 text-yellow-600" />
        </CardHeader>
        <CardContent>
          <div className="text-2xl font-bold text-yellow-600">
            {pendingCount}
          </div>
          <p className="text-xs text-gray-500 mt-1">
            aguardando conclusao
          </p>
        </CardContent>
      </Card>

      {/* Card 3: Atrasados */}
      <Card className="hover:shadow-md transition-shadow">
        <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
          <CardTitle className="text-sm font-medium text-gray-600">
            Atrasados
          </CardTitle>
          <AlertTriangle className={cn('h-5 w-5', getOverdueColor(overdueCount))} />
        </CardHeader>
        <CardContent>
          <div className={cn('text-2xl font-bold', getOverdueColor(overdueCount))}>
            {overdueCount}
          </div>
          <p className="text-xs text-gray-500 mt-1">
            menos de 12h para consulta
          </p>
        </CardContent>
      </Card>
    </div>
  )
}
```

7. **Color helper implementations:**
```typescript
function getCompletionRateColor(rate: number): string {
  if (rate >= 70) return 'text-green-600'
  if (rate >= 50) return 'text-yellow-600'
  return 'text-red-600'
}

function getOverdueColor(count: number): string {
  if (count === 0) return 'text-green-600'
  if (count <= 3) return 'text-yellow-600'
  return 'text-red-600'
}
```

Ensure the component is self-contained and can receive data from parent (no internal fetch).
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>Component renders 3 cards, shows skeleton when loading, uses correct colors</done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors
2. Component exports PreCheckinAnalytics and PreCheckinAnalyticsProps
3. Skeleton shows when loading=true
4. Cards display with correct icons and colors
5. Grid is responsive (verify with different viewport widths in browser)
</verification>

<success_criteria>
- PreCheckinAnalytics component created with proper TypeScript types
- Loading skeleton matches existing KPI card patterns
- Color coding follows requirements (green=good, yellow=warning, red=alert)
- Cards are responsive (3 cols desktop, 2 cols tablet, 1 col mobile)
- Component is pure presentation (receives data via props)
</success_criteria>

<output>
After completion, create `.planning/phases/14-pre-checkin-dashboard/14-02-SUMMARY.md`
</output>
