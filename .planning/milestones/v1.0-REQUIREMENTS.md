# Requirements Archive: v1.0 MVP - Botfy ClinicOps Console Administrativo

**Archived:** 2026-01-17
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## Core Value

Dashboard de alertas que mostra "at glance" tudo que precisa de atenção: conversas travadas, pré check-ins pendentes, agendamentos não confirmados e handoffs para humanos. A equipe precisa saber rapidamente onde intervir.

---

## v1 Requirements (All Complete)

### Dashboard & Alerts (15/15)

- [x] **ALERT-01**: User can view real-time alert queue showing all problems requiring attention
- [x] **ALERT-02**: User can see alert priority/urgency indicators (urgent/high/low)
- [x] **ALERT-03**: User can filter alerts by type (conversas travadas, pré check-ins pendentes, agendamentos não confirmados, handoffs normais, handoffs por erro)
- [x] **ALERT-04**: User can filter alerts by status (new/in-progress/resolved/dismissed)
- [x] **ALERT-05**: User can filter alerts by date range
- [x] **ALERT-06**: User can sort alerts by priority, date, patient, or status
- [x] **ALERT-07**: User can update alert status (mark as in-progress, resolved, or dismissed)
- [x] **ALERT-08**: User can click alert to see detail view with full context (patient info, appointment details, conversation history)
- [x] **ALERT-09**: System automatically prioritizes alerts using AI/ML based on context (patient history, issue type, urgency) — *Implemented with heuristics, ML deferred to v1.1+*
- [x] **ALERT-10**: System detects patterns in failures (recurring issues, common failure times, specific providers)
- [x] **ALERT-11**: User can perform one-click interventions from alert view (reschedule appointment, send message, clear chat memory)
- [x] **ALERT-12**: Alert detail view shows related appointment information
- [x] **ALERT-13**: Alert detail view shows patient contact information
- [x] **ALERT-14**: Alert detail view shows conversation thread that triggered alert
- [x] **ALERT-15**: Alert detail view shows action buttons for common interventions

### Calendar & Scheduling (15/15)

- [x] **CAL-01**: User can view appointments in calendar format (day/week/month views)
- [x] **CAL-02**: User can see all providers' schedules centrally (multi-provider support)
- [x] **CAL-03**: User can see appointment status indicators (confirmed/tentative/no-show/cancelled/completed)
- [x] **CAL-04**: User can see time slot availability (which slots are free vs booked)
- [x] **CAL-05**: User can create new appointment manually
- [x] **CAL-06**: User can edit existing appointment (change date/time/service)
- [x] **CAL-07**: User can reschedule appointment to different time slot
- [x] **CAL-08**: User can cancel appointment
- [x] **CAL-09**: User can view appointment details by clicking on calendar event
- [x] **CAL-10**: User can filter calendar by provider
- [x] **CAL-11**: User can filter calendar by service type
- [x] **CAL-12**: System manages waitlist for appointments
- [x] **CAL-13**: System automatically fills cancelled appointments from waitlist
- [x] **CAL-14**: User can add patient to waitlist for specific date/time
- [x] **CAL-15**: Calendar syncs with N8N workflows (changes reflected in both systems)

### Patient Management (14/14)

- [x] **PAT-01**: User can search patients by name
- [x] **PAT-02**: User can search patients by phone number
- [x] **PAT-03**: User can search patients by CPF
- [x] **PAT-04**: User can view patient profile with contact information
- [x] **PAT-05**: User can view patient appointment history (past and upcoming)
- [x] **PAT-06**: User can create new patient record
- [x] **PAT-07**: User can edit patient contact information
- [x] **PAT-08**: User can edit patient personal data (nome, data_nascimento, CPF, endereço)
- [x] **PAT-09**: User can edit patient convênio information (convenio, numero_carteirinha)
- [x] **PAT-10**: User can view patient documents (stored files)
- [x] **PAT-11**: User can upload documents for patient
- [x] **PAT-12**: User can delete patient documents
- [x] **PAT-13**: Patient profile shows conversation history with clinic
- [x] **PAT-14**: Patient profile shows no-show rate and attendance patterns

### Conversation Monitoring (10/10)

- [x] **CONV-01**: User can view WhatsApp conversation thread for any patient
- [x] **CONV-02**: User can see message status indicators (sent/delivered/read/failed)
- [x] **CONV-03**: User can see which messages were sent by AI vs human
- [x] **CONV-04**: Conversations are linked to patient records
- [x] **CONV-05**: User can access conversation from alert detail view
- [x] **CONV-06**: User can access conversation from patient profile
- [x] **CONV-07**: User can clear chat memory (n8n_chat_histories) to resolve AI loops
- [x] **CONV-08**: User can see conversation status (I.A, Humano, Finalizado)
- [x] **CONV-09**: Conversation viewer shows timestamp for each message
- [x] **CONV-10**: Conversation viewer scrolls to most recent messages first

### System Configuration (14/14)

- [x] **CONF-01**: User can configure business hours (days of week, opening/closing times)
- [x] **CONF-02**: User can configure lunch break hours
- [x] **CONF-03**: User can view list of services offered
- [x] **CONF-04**: User can create new service (nome, duração, preço, ativo/inativo)
- [x] **CONF-05**: User can edit existing service
- [x] **CONF-06**: User can activate/deactivate service
- [x] **CONF-07**: User can delete service
- [x] **CONF-08**: User can configure antecedência mínima for appointments
- [x] **CONF-09**: User can view list of system users
- [x] **CONF-10**: User can create new user account (email, senha, role)
- [x] **CONF-11**: User can edit user account (email, role)
- [x] **CONF-12**: User can deactivate user account
- [x] **CONF-13**: User can assign roles (Admin, Atendente) to users
- [x] **CONF-14**: User can configure notification preferences

### Authentication & Security (12/12)

- [x] **AUTH-01**: User can sign up with email and password
- [x] **AUTH-02**: User can log in with email and password
- [x] **AUTH-03**: User can log out
- [x] **AUTH-04**: User session persists across browser refresh
- [x] **AUTH-05**: System enforces role-based access control (Admin vs Atendente permissions)
- [x] **AUTH-06**: System logs all PHI access for HIPAA compliance (6-year retention)
- [x] **AUTH-07**: System encrypts all patient data at rest
- [x] **AUTH-08**: System uses secure authentication (HTTPS, secure cookies)
- [x] **AUTH-09**: Admin can view audit logs (who accessed what, when)
- [x] **AUTH-10**: System automatically logs out inactive users after timeout
- [x] **AUTH-11**: Atendente role can view and update alerts, patients, appointments
- [x] **AUTH-12**: Admin role has full access to all features including user management and audit logs

### Infrastructure & UX (9/9)

- [x] **UX-01**: Interface is mobile-responsive (works on phones and tablets)
- [x] **UX-02**: Interface is touch-friendly for mobile devices
- [x] **UX-03**: Interface follows Botfy brand identity (colors and logo from botfy.ai)
- [x] **UX-04**: System displays clear error messages when operations fail
- [x] **UX-05**: System provides loading indicators for async operations
- [x] **UX-06**: System provides success confirmations for important actions
- [x] **UX-07**: System handles network errors gracefully with retry options
- [x] **UX-08**: Dashboard loads key metrics at glance (agendamentos hoje, taxa de confirmação, conversas ativas)
- [x] **UX-09**: System shows status of external services (Evolution API, N8N, Supabase)

---

## v2 Requirements (Deferred)

These requirements were explicitly deferred to v2:

- CAL-V2-01: Drag-and-drop rescheduling (implemented click-to-reschedule instead)
- CAL-V2-02: AI-suggested appointment times
- CAL-V2-03: Recurring appointments
- CONV-V2-01: Real-time human handoff
- CONV-V2-02: AI conversation quality rating
- CONV-V2-03: In-app notifications for conversations
- ALERT-V2-01: Custom alert rules
- ALERT-V2-02: Bulk alert actions
- ALERT-V2-03: Auto-escalation
- CONF-V2-01: Message template customization
- CONF-V2-02: Advanced scheduling rules
- CONF-V2-03: EHR integration
- ANLT-01 through ANLT-06: Advanced analytics (basic KPIs implemented in Phase 8)
- AUTH-V2-01: 2FA/MFA
- AUTH-V2-02: OAuth login
- AUTH-V2-03: Granular permissions

---

## Out of Scope (Maintained)

| Feature | Reason |
|---------|--------|
| Full EHR functionality | Massive scope creep - EHR is different product category |
| Direct WhatsApp messaging from console | Messages flow through N8N/Evolution API workflows |
| Multi-location/multi-clinic support | System is single-tenant for v1 |
| Advanced analytics/BI tools | CSV export provided for external analysis |
| SMS/email/Telegram channels | System is WhatsApp-focused |
| Payment/billing system | Out of scope for operations console |
| Video appointments | Not core to operations console |
| Mobile native app | Web-first with mobile-responsive design |

---

## Milestone Summary

**Shipped:** 79 of 79 v1 requirements (100%)

**Adjusted during implementation:**
- ALERT-09: Changed from "AI/ML" to "heuristic algorithms" — ML deferred to v1.1+ as it requires training data
- CAL-V2-01: Drag-and-drop was initially planned, implemented as click-to-reschedule for better mobile UX

**Dropped:** None

---

## Traceability Summary

| Phase | Requirements | Shipped |
|-------|--------------|---------|
| Phase 1: Secure Foundation | 17 | 17/17 ✅ |
| Phase 2: Alert Dashboard | 16 | 16/16 ✅ |
| Phase 3: Patient Management | 14 | 14/14 ✅ |
| Phase 4: Calendar & Scheduling | 15 | 15/15 ✅ |
| Phase 5: Conversation Monitoring | 10 | 10/10 ✅ |
| Phase 6: One-Click Interventions | 1 | 1/1 ✅ |
| Phase 7: System Configuration | 14 | 14/14 ✅ |
| Phase 8: Analytics & Smart Features | 2 | 2/2 ✅ |

**Total:** 79/79 requirements shipped (100%)

---

*Requirements defined: 2026-01-15*
*Archived: 2026-01-17 as part of v1.0 milestone completion*
